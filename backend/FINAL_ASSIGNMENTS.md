# Complete Document Assignment Matrix

## Assignment Summary

All document collections have been assigned according to your spreadsheet specifications.

---

## Document Collection Assignments

### 1. UCL RCT
**Collection:** `dr_general_ucl_rct`
**Source Type:** RCT (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. Joshua Dines
- ✅ Dr. Asheesh Bedi
- ✅ Dr. Ayoosh Pareek
- ✅ Dr. Khalid Alkhelaifi

**CareGuide Models:**
- ✅ CareGuide Elbow

---

### 2. Rotator Cuff RCT
**Collection:** `dr_general_rotator_cuff_rct`
**Source Type:** RCT (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. Joshua Dines
- ✅ Dr. Asheesh Bedi
- ✅ Dr. Ayoosh Pareek
- ✅ Dr. Khalid Alkhelaifi

**CareGuide Models:**
- ✅ CareGuide Shoulder

---

### 3. Meniscus RCT
**Collection:** `dr_general_meniscus_rct`
**Source Type:** RCT (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. Joshua Dines
- ✅ Dr. Asheesh Bedi
- ✅ Dr. Ayoosh Pareek
- ✅ Dr. Khalid Alkhelaifi

**CareGuide Models:**
- ✅ CareGuide Knee

---

### 4. ACL RCT
**Collection:** `dr_general_acl_rct`
**Source Type:** RCT (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. Joshua Dines
- ✅ Dr. Asheesh Bedi
- ✅ Dr. Ayoosh Pareek
- ✅ Dr. Khalid Alkhelaifi

**CareGuide Models:**
- ✅ CareGuide Knee

---

### 5. Dines-specific Clinic Protocols
**Collection:** `dr_joshua_dines_clinic_protocols`
**Source Type:** CLINICAL_GUIDELINE (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. Joshua Dines
- ✅ Dr. Asheesh Bedi

**CareGuide Models:**
- ❌ None

---

### 6. HSS Protocols
**Collection:** `dr_general_hss_protocols`
**Source Type:** CLINICAL_GUIDELINE (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. Joshua Dines
- ✅ Dr. Ayoosh Pareek
- ✅ Dr. Sheeraz Qureshi
- ✅ Dr. William Long

**CareGuide Models:**
- ❌ None

---

### 7. Knee and Lower Leg
**Collection:** `dr_general_knee_lower_leg`
**Source Type:** CLINICAL_GUIDELINE (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. William Long
- ✅ Dr. Khalid Alkhelaifi

**CareGuide Models:**
- ✅ CareGuide Knee

---

### 8. Foot and Ankle
**Collection:** `dr_general_foot_ankle`
**Source Type:** CLINICAL_GUIDELINE (Precedence: 100)

**Assigned Surgeons:**
- ❌ None (CareGuide only)

**CareGuide Models:**
- ✅ CareGuide Ankle/Foot

---

### 9. Shoulder
**Collection:** `dr_general_shoulder`
**Source Type:** CLINICAL_GUIDELINE (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. Joshua Dines
- ✅ Dr. Asheesh Bedi
- ✅ Dr. Ayoosh Pareek
- ✅ Dr. Khalid Alkhelaifi

**CareGuide Models:**
- ✅ CareGuide Shoulder

---

### 10. Elbow
**Collection:** `dr_general_elbow`
**Source Type:** CLINICAL_GUIDELINE (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. Joshua Dines
- ✅ Dr. Ayoosh Pareek
- ✅ Dr. Khalid Alkhelaifi

**CareGuide Models:**
- ✅ CareGuide Elbow

---

### 11. Hip and Thigh
**Collection:** `dr_general_hip_thigh`
**Source Type:** CLINICAL_GUIDELINE (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. Asheesh Bedi
- ✅ Dr. William Long

**CareGuide Models:**
- ✅ CareGuide Hip

---

### 12. Neck
**Collection:** `dr_general_neck`
**Source Type:** CLINICAL_GUIDELINE (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. Sheeraz Qureshi

**CareGuide Models:**
- ✅ CareGuide Spine

---

### 13. Back
**Collection:** `dr_general_back`
**Source Type:** CLINICAL_GUIDELINE (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. Sheeraz Qureshi

**CareGuide Models:**
- ✅ CareGuide Spine

---

### 14. AAOS Knee OA Guidelines
**Collection:** `dr_general_aaos_knee_oa`
**Source Type:** AAOS (Precedence: 100)

**Assigned Surgeons:**
- ✅ Dr. William Long

**CareGuide Models:**
- ✅ CareGuide Knee

---

## Summary by Surgeon

### Dr. Joshua Dines (Sports Medicine)
**Has access to 9 collections:**
1. UCL RCT
2. Rotator Cuff RCT
3. Meniscus RCT
4. ACL RCT
5. Dines-specific Clinic Protocols
6. HSS Protocols
7. Shoulder
8. Elbow
9. His own collections (`dr_joshua_dines_*`)

---

### Dr. Asheesh Bedi (Sports Medicine)
**Has access to 9 collections:**
1. UCL RCT
2. Rotator Cuff RCT
3. Meniscus RCT
4. ACL RCT
5. Dines-specific Clinic Protocols
6. Shoulder
7. Hip and Thigh
8. Joshua Dines' collections (via SHARED_COLLECTIONS)
9. His own collections (`dr_asheesh_bedi_*`)

---

### Dr. Ayoosh Pareek (Sports Medicine)
**Has access to 8 collections:**
1. UCL RCT
2. Rotator Cuff RCT
3. Meniscus RCT
4. ACL RCT
5. HSS Protocols
6. Shoulder
7. Elbow
8. His own collections (`dr_ayoosh_pareek_*`)

---

### Dr. Sheeraz Qureshi (Spine Surgery)
**Has access to 3 collections:**
1. HSS Protocols
2. Neck
3. Back
4. His own collections (`dr_sheeraz_qureshi_*`)

---

### Dr. William Long (Joint Replacement)
**Has access to 4 collections:**
1. HSS Protocols
2. Knee and Lower Leg
3. Hip and Thigh
4. AAOS Knee OA Guidelines
5. His own collections (`dr_william_long_*`)

---

### Dr. Khalid Alkhelaifi (Sports Medicine)
**Has access to 8 collections:**
1. UCL RCT
2. Rotator Cuff RCT
3. Meniscus RCT
4. ACL RCT
5. Knee and Lower Leg
6. Shoulder
7. Elbow
8. His own collections (`dr_khalid_alkhelaifi_*`)

---

## CareGuide MSK Model Access

### CareGuide Shoulder
**Searches these collections:**
- Rotator Cuff RCT
- Shoulder
- Any other shoulder-related collections

### CareGuide Elbow
**Searches these collections:**
- UCL RCT
- Elbow
- Any other elbow-related collections

### CareGuide Hand/Wrist
**Searches these collections:**
- Any hand or wrist-related collections

### CareGuide Hip
**Searches these collections:**
- Hip and Thigh
- Any other hip-related collections

### CareGuide Knee
**Searches these collections:**
- ACL RCT
- Meniscus RCT
- Knee and Lower Leg
- AAOS Knee OA Guidelines
- Any other knee-related collections

### CareGuide Ankle/Foot
**Searches these collections:**
- Foot and Ankle
- Any other foot or ankle-related collections

### CareGuide Spine
**Searches these collections:**
- Neck
- Back
- Any other spine-related collections

---

## Implementation Details

### File Location
`/home/user/protocare-ai/backend/app/routers/rag.py` (lines 167-191)

### Code Structure
```python
COLLECTION_PERMISSIONS = {
    # RCT Documents
    "dr_general_ucl_rct": ["joshua_dines", "asheesh_bedi", "ayoosh_pareek", "khalid_alkhelaifi"],
    "dr_general_rotator_cuff_rct": ["joshua_dines", "asheesh_bedi", "ayoosh_pareek", "khalid_alkhelaifi"],
    "dr_general_meniscus_rct": ["joshua_dines", "asheesh_bedi", "ayoosh_pareek", "khalid_alkhelaifi"],
    "dr_general_acl_rct": ["joshua_dines", "asheesh_bedi", "ayoosh_pareek", "khalid_alkhelaifi"],

    # Dines-specific protocols
    "dr_joshua_dines_clinic_protocols": ["joshua_dines", "asheesh_bedi"],

    # HSS protocols
    "dr_general_hss_protocols": ["joshua_dines", "ayoosh_pareek", "sheeraz_qureshi", "william_long"],

    # Body part specific collections
    "dr_general_knee_lower_leg": ["william_long", "khalid_alkhelaifi"],
    "dr_general_foot_ankle": [],  # CareGuide only
    "dr_general_shoulder": ["joshua_dines", "asheesh_bedi", "ayoosh_pareek", "khalid_alkhelaifi"],
    "dr_general_elbow": ["joshua_dines", "ayoosh_pareek", "khalid_alkhelaifi"],
    "dr_general_hip_thigh": ["asheesh_bedi", "william_long"],
    "dr_general_neck": ["sheeraz_qureshi"],
    "dr_general_back": ["sheeraz_qureshi"],

    # AAOS Guidelines
    "dr_general_aaos_knee_oa": ["william_long"],
}
```

### CareGuide Body-Part Mapping
`/home/user/protocare-ai/backend/app/routers/rag.py` (lines 729-741)

```python
body_part_matches = {
    "elbow": ["ucl", "elbow"],
    "knee": ["acl", "meniscus", "knee", "aaos_knee", "lower_leg"],
    "shoulder": ["rotator_cuff", "shoulder"],
    "hip": ["hip", "thigh"],
    "back": ["back"],
    "neck": ["neck"],
    "spine": ["back", "neck"],
    "foot": ["foot", "ankle"],
    "ankle": ["foot", "ankle"],
    "hand": ["hand", "wrist"],
    "wrist": ["hand", "wrist"],
}
```

---

## How to Modify Assignments

To add or remove a surgeon from a collection, edit `COLLECTION_PERMISSIONS` in `backend/app/routers/rag.py`:

### Add a surgeon:
```python
"dr_general_ucl_rct": ["joshua_dines", "asheesh_bedi", "ayoosh_pareek", "khalid_alkhelaifi", "william_long"],  # Added Long
```

### Remove a surgeon:
```python
"dr_general_ucl_rct": ["joshua_dines", "asheesh_bedi"],  # Removed Pareek and Alkhelaifi
```

### Add a new collection:
```python
COLLECTION_PERMISSIONS = {
    # ... existing ...
    "dr_general_new_protocol": ["joshua_dines", "ayoosh_pareek"],
}
```

---

## Status

✅ **All assignments implemented and committed**
✅ **Code pushed to branch:** `claude/assign-docs-to-surgeons-X0xc6`
✅ **Ready for document uploads**

Next step: Upload the actual document files to create these collections in Qdrant.
